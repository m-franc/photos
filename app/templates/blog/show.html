{% from PIL import Image %}
{% from PIL.ExifTags import TAGS %}

{% block metadata %}
  image = Image.open(UPLOAD_FOLDER + '/' + picture['path'])
  exifdata = image.getexif()
  for tag_id in exifdata:
  # get the tag name, instead of human unreadable tag id
  tag = TAGS.get(tag_id, tag_id)
  data = exifdata.get(tag_id)
  # decode bytes
  if isinstance(data, bytes):
      data = data.decode()
  print(f"{tag:25}: {data}")
{% endblock %}


{% extends 'base.html' %}

{% block header %}
  <h1>{% block title %}{{ picture['title'] }}{% endblock %}</h1>
  <a href="{{ url_for('blog.index') }}">Retour Ã  la galerie</a>


{% endblock %}

{% block content %}
  <img class="path" src="{{ url_for('static', filename = 'pictures/' + picture['path']) }}" style="width: 95%; padding-top: 20px; margin-left: 20px;" />
  {% if g.user['id'] == picture['author_id'] %}
    <a class="action" href="{{ url_for('blog.update', id=picture['id']) }}">Edit</a>
  {% endif %}
  {% if g.user['id'] == picture['author_id'] %}
    <form action="{{ url_for('blog.delete', id=picture['id']) }}" method="post">
      <input class="danger" type="submit" value="Delete" onclick="return confirm('Are you sure?');">
    </form>
  {% endif %}
{% endblock %}
